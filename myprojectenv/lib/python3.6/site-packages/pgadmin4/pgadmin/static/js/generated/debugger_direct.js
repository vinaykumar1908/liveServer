define(["translations","pgadmin.browser.endpoints","pgadmin.browser.utils","pgadmin.browser.messages"],function(e,t,r,n){return webpackJsonp([2,3],{102:function(e,t,r){"use strict";function n(e,t,r,n,a,o){var s="";return i.default.each(i.default.sortBy(i.default.pick(t,a),function(e){return e.priority}),function(e){s=s+"/"+encodeURI(e._id)}),s=o?s+"/"+o:s+"/",""+e+n+"/"+r+s}var a=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(a);e.exports={generate_url:n}},103:function(e,t,r){"use strict";var n,a;n=[r(2),r(4),r(0),r(1),r(10),r(11),r(3),r(5),r(12),r(24)],void 0!==(a=function(e,t,r,n,a,i,o,s,l){var u=window.wcDocker,d=function(e){var t=e.get("type");if(-1!=t.indexOf("[]"))return-1!=t.indexOf("integer")?l.Extension.InputIntegerArrayCell:l.Extension.InputStringArrayCell;switch(t){case"bool":return l.BooleanCell;case"integer":return void 0!=e.get("value")&&e.set({value:parseInt(e.get("value"))},{silent:!0}),l.IntegerCell;case"real":return void 0!=e.get("value")&&e.set({value:parseFloat(e.get("value"))},{silent:!0}),l.NumberCell;case"string":return l.StringCell;case"date":return l.DateCell;default:return l.Cell}},c=function(e){return-1!=e.get("type").indexOf("[]")?l.StringCell:l.BooleanCell},g=a.Model.extend({defaults:{name:void 0,type:void 0,is_null:void 0,expr:void 0,value:void 0,use_default:void 0,default_value:void 0},validate:function(){if(n.isUndefined(this.get("value"))||n.isNull(this.get("value"))||""==String(this.get("value")).replace(/^\s+|\s+$/g,"")){var t=e("Please enter a value for the parameter.");return this.errorModel.set("value",t),t}return this.errorModel.unset("value"),null}}),f=a.Collection.extend({model:g}),p=function(e){return e instanceof a.Model&&e.get("use_default")},b=function(e){if(e instanceof a.Model){return-1==e.get("type").indexOf("[]")}};return function(a,o,g){i.debuggerInputArgsDialog||i.dialog("debuggerInputArgsDialog",function(){return{main:function(a,o,u,g){this.preferences=window.top.pgAdmin.Browser.get_preferences_for_module("debugger"),this.set("title",a),this.set("debug_info",o),this.set("restart_debug",u);var _=this.func_args_data=[];if(0==u){var h=s.tree,v=h.selected(),m=v&&1==v.length?h.itemData(v):void 0,y=m&&s.Nodes[m._type];if(!m)return;var w,k=y.getTreeNodeHierarchy.apply(y,[v]);"function"==m._type?w=t("debugger.get_arguments",{sid:k.server._id,did:k.database._id,scid:k.schema._id,func_id:k.function._id}):"procedure"==m._type?w=t("debugger.get_arguments",{sid:k.server._id,did:k.database._id,scid:k.schema._id,func_id:k.procedure._id}):"edbfunc"==m._type?w=t("debugger.get_arguments",{sid:k.server._id,did:k.database._id,scid:k.schema._id,func_id:k.edbfunc._id}):"edbproc"==m._type&&(w=t("debugger.get_arguments",{sid:k.server._id,did:k.database._id,scid:k.schema._id,func_id:k.edbproc._id}))}else w=t("debugger.get_arguments",{sid:o.server_id,did:o.database_id,scid:o.schema_id,func_id:o.function_id});r.ajax({url:w,method:"GET",async:!1}).done(function(e){if(0!=e.data.args_count)for(v=0;v<e.data.result.length;v++)_.push({arg_id:e.data.result[v].arg_id,is_null:e.data.result[v].is_null,is_expression:e.data.result[v].is_expression,use_default:e.data.result[v].use_default,value:e.data.result[v].value})}).fail(function(){i.alert(e("Debugger Error"),e("Unable to fetch the arguments from server"))});var D,x,S,C,E,T,N,P=l.HeaderCell.extend({className:"width_percent_25"}),A=[],M=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"is_null",label:e("Null?"),type:"boolean",cell:"boolean"},{name:"expr",label:e("Expression?"),type:"boolean",cellFunction:c,editable:b},{name:"value",label:e("Value"),type:"text",editable:!0,cellFunction:d,headerCell:P},{name:"use_default",label:e("Use Default?"),type:"boolean",cell:"boolean",editable:p},{name:"default_value",label:e("Default value"),type:"text",editable:!1,cell:"string"}],B=[],O=[],I=this.input_arg_id=[];if(null!=o.proargmodes){var K=o.proargmodes.split(",");for(N=0;N<K.length;N++)("i"==K[N]||"b"==K[N]||g&&"o"==K[N])&&I.push(N)}else{var j=o.proargtypenames.split(",");for(N=0;N<j.length;N++)I.push(N)}x=o.proargtypenames.split(","),null!=o.proargmodes&&(S=o.proargmodes.split(",")),o.pronargdefaults&&(C=o.pronargdefaults,E=o.proargdefaults.split(","),T=C);var V,F,L,q,G;if(null!=o.proargnames){for(D=o.proargnames.split(","),G=D.length-1;G>=0;G--)null!=o.proargmodes?("i"==S[G]||"b"==S[G]||g&&"o"==S[G])&&(T?(T-=1,A[G]=E[T]):A[G]="<No default value>"):T?(T-=1,A[G]=E[T]):A[G]="<No default value>";if(0!=x.length)for(v=0;v<x.length;v++)null!=o.proargmodes?("i"==S[v]||"b"==S[v]||g&&"o"==S[v])&&(q=!1,"<No default value>"!=A[v]&&(q=!0),B.push({name:D[v],type:x[v],use_default:q,default_value:A[v]})):(q=!1,"<No default value>"!=A[v]&&(q=!0),B.push({name:D[v],type:x[v],use_default:q,default_value:A[v]}));if(0!=_.length)for(v=0;v<_.length;v++)(null==o.proargmodes||"o"!=S[v]||g)&&(L=_[v].arg_id,F=[],-1!=x[L].indexOf("[]")?(V=_[v].value.split(","),-1!=x[L].indexOf("integer")&&n.each(V,function(e){F.push({value:parseInt(e)})}),n.each(V,function(e){F.push({value:e})})):F=_[v].value,O.push({name:D[L],type:x[L],is_null:!!_[v].is_null,expr:!!_[v].is_expression,value:F,use_default:!!_[v].use_default,default_value:A[L]}))}else{var $=[];for(v=0;v<x.length;v++)$[v]="dbgparam"+(v+1);if(o.pronargdefaults){for(G=$.length-1;G>=0;G--)o.proargmodes,T?(T-=1,A[G]=E[T]):A[G]="<No default value>";for(v=0;v<x.length;v++)null==o.proargmodes?(q=!1,"<No default value>"!=A[v]&&(q=!0),B.push({name:$[v],type:x[v],use_default:q,default_value:A[v]})):("i"==S[v]||"b"==S[v]||g&&"o"==S[v])&&(q=!1,"<No default value>"!=A[v]&&(q=!0),B.push({name:$[v],type:x[v],use_default:q,default_value:A[v]}))}else for(v=0;v<x.length;v++)B.push({name:$[v],type:x[v],use_default:!1,default_value:"<No default value>"}),A[v]="<No default value>";if(0!=_.length)for(v=0;v<_.length;v++)L=_[v].arg_id,F=[],-1!=x[L].indexOf("[]")?(V=_[v].value.split(","),-1!=x[L].indexOf("integer")&&n.each(V,function(e){F.push({value:parseInt(e)})}),n.each(V,function(e){F.push({value:e})})):F=_[v].value,O.push({name:$[L],type:x[L],is_null:!!_[v].is_null,expr:!!_[v].is_expression,value:F,use_default:!!_[v].use_default,default_value:A[L]})}0==_.length?this.debuggerInputArgsColl=new f(B):this.debuggerInputArgsColl=new f(O),this.grid&&(this.grid.remove(),this.grid=null);var R=this.grid=new l.Grid({columns:M,collection:this.debuggerInputArgsColl,className:"backgrid table-bordered"});R.render(),r(this.elements.content).html(R.el);var z=r(R.el).find("input:checkbox").first();z.length&&setTimeout(function(){z.trigger("click")},250)},settings:{debug_info:void 0,restart_debug:void 0},setup:function(){return{buttons:[{text:e("Debug"),key:13,className:"btn btn-primary"},{text:e("Cancel"),key:27,className:"btn btn-primary"}],options:{padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}},callback:function(n){if(n.button.text===e("Debug")){var a=this;if(0==a.setting("restart_debug")){var o=s.tree,l=o.selected(),d=l&&1==l.length?o.itemData(l):void 0,c=d&&s.Nodes[d._type];if(!d)return;var g=c.getTreeNodeHierarchy.apply(c,[l])}var f=[],p=this.sqlite_func_args_list=[],b=0;this.grid.collection.each(function(e){if(e.get("is_null")?f.push({name:e.get("name"),type:e.get("type"),value:"NULL"}):e.get("use_default")?f.push({name:e.get("name"),type:e.get("type"),value:e.get("default_value")}):f.push({name:e.get("name"),type:e.get("type"),value:e.get("value")}),0==a.setting("restart_debug")){var t;"function"==d._type?t=g.function._id:"procedure"==d._type?t=g.procedure._id:"edbfunc"==d._type?t=g.edbfunc._id:"edbproc"==d._type&&(t=g.edbproc._id),p.push({server_id:g.server._id,database_id:g.database._id,schema_id:g.schema._id,function_id:t,arg_id:a.input_arg_id[b],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")})}else p.push({server_id:a.setting("debug_info").server_id,database_id:a.setting("debug_info").database_id,schema_id:a.setting("debug_info").schema_id,function_id:a.setting("debug_info").function_id,arg_id:a.input_arg_id[b],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")});b+=1});var _;if(0==a.setting("restart_debug"))"function"==d._type?_=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.function._id}):"procedure"==d._type?_=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.procedure._id}):"edbfunc"==d._type?_=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbfunc._id}):"edbproc"==d._type&&(_=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbproc._id})),r.ajax({url:_,method:"POST",data:{data:JSON.stringify(f)}}).done(function(n){var o=t("debugger.direct",{trans_id:n.data.debuggerTransId});if(a.preferences.debugger_new_browser_tab)window.open(o,"_blank");else{s.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",function(e){e.openURL(o)});var l=s.docker.findPanels("properties"),c=s.docker.addPanel("frm_debugger",u.DOCK.STACKED,l[0]);c.focus(),c.on(u.EVENT.CLOSED,function(){var e=t("debugger.close",{trans_id:n.data.debuggerTransId});r.ajax({url:e,method:"DELETE"})})}var f;"function"==d._type?f=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.function._id}):"procedure"==d._type?f=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.procedure._id}):"edbfunc"==d._type?f=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbfunc._id}):"edbproc"==d._type&&(f=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbproc._id})),r.ajax({url:f,method:"POST",data:{data:JSON.stringify(p)}}).done(function(){}).fail(function(){i.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))})}).fail(function(t){i.alert(e("Debugger Target Initialization Error"),t.responseJSON.errormsg)});else{_=t("debugger.start_listener",{trans_id:a.setting("debug_info").trans_id}),r.ajax({url:_,method:"POST",data:{data:JSON.stringify(f)}}).done(function(){}).fail(function(t){i.alert(e("Debugger Listener Startup Error"),t.responseJSON.errormsg)});var h=t("debugger.set_arguments",{sid:a.setting("debug_info").server_id,did:a.setting("debug_info").database_id,scid:a.setting("debug_info").schema_id,func_id:a.setting("debug_info").function_id});r.ajax({url:h,method:"POST",data:{data:JSON.stringify(p)}}).done(function(){}).fail(function(){i.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))})}return!0}if(n.button.text===e("Cancel"))return!1},build:function(){i.pgDialogBuild.apply(this)},prepare:function(){r(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),0==this.func_args_data.length?this.__internal.buttons[0].element.disabled=!0:this.__internal.buttons[0].element.disabled=!1,this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:edited",function(e){return function(){for(var t=!1,r=0;r<this.collection.length;r++)if(this.collection.models[r].get("is_null"))e.__internal.buttons[0].element.disabled=!1,t=!0;else if(""==this.collection.models[r].get("value")||null==this.collection.models[r].get("value")||void 0==this.collection.models[r].get("value")){if(t=!0,!this.collection.models[r].get("use_default")){e.__internal.buttons[0].element.disabled=!0;break}e.__internal.buttons[0].element.disabled=!1}t||(e.__internal.buttons[0].element.disabled=!1)}}(this))}}}),i.debuggerInputArgsDialog(e("Debugger"),a,o,g).resizeTo("60%","60%")}}.apply(t,n))&&(e.exports=a)},104:function(e,t,r){"use strict";function n(e,t){if(t){9!==(t.which||t.keyCode)&&e.focus()}}function a(e){var t=void 0;return e&&(e.procedure&&e.procedure._id?t=e.procedure._id:e.edbproc&&e.edbproc._id&&(t=e.edbproc._id)),t}e.exports={setFocusToDebuggerEditor:n,getProcedureId:a}},160:function(e,t,r){"use strict";var n,a;n=[r(0),r(1),r(8)],void 0!==(a=function(e,t,r){return function(e,n){if(t.isUndefined(n)||t.isNull(n))return!0;r.startsWith(n,"coll-")&&(n=n.replace("coll-",""));var a=["server_group","server","catalog_object_column"];if(t.indexOf(a,n)>=0)return!0;var i=e.get_preference("browser","show_node_"+n);return!i||i.value}}.apply(t,n))&&(e.exports=a)},161:function(e,t,r){"use strict";(function(e){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0;var i=r(3),o=a(i),s=r(4),l=a(s),u=r(50),d=n(u),c=r(0),g=a(c),f=r(11),p=n(f),b=r(30),_=n(b),h=o.default.Browser=o.default.Browser||{};e.extend(h,{preferences_cache:[],prefcache_version:0,generate_preference_version:function(){return(new Date).getTime()},preference_version:function(e){if(!e)return this.prefcache_version;this.prefcache_version=e},get_preference:function(t,r){var n=this;if(0!=e.size(n.preferences_cache))return e.findWhere(n.preferences_cache,{module:t,name:r});var a=function(){if(n.preferences_cache.length>0)return clearInterval(i),e.findWhere(n.preferences_cache,{module:t,name:r})},i=setInterval(a,1e3)},get_preferences_for_module:function(t){var r=this,n={};if(e.each(e.where(r.preferences_cache,{module:t}),function(e){n[e.name]=e.value}),Object.keys(n).length>0)return n},get_preference_for_id:function(t){var r=this;return e.findWhere(r.preferences_cache,{id:t})},cache_preferences:function(t){var r=this;setTimeout(function(){g.default.ajax({url:(0,l.default)("preferences.get_all")}).done(function(n){r.preferences_cache=n,r.preference_version(r.generate_preference_version()),h.keyboardNavigation.init(),h.tree&&(d.modifyAcitreeAnimation(r),d.modifyAlertifyAnimation(r)),t&&("string"==typeof t?g.default.event.trigger("prefchange:"+t):e.each(t,function(e,t){g.default.event.trigger("prefchange:"+t)}))}).fail(function(e,t,r){p.pgRespErrorNotify(e,r)})},500)},reflectPreferences:function(e){var t=this;if("sqleditor"===e||null===e||void 0===e){var r=t.get_preferences_for_module("sqleditor");(0,g.default)(t.editor.getWrapperElement()).css("font-size",_.calcFontSize(r.sql_font_size)),t.editor.setOption("tabSize",r.tab_size),t.editor.setOption("lineWrapping",r.wrap_code),t.editor.setOption("autoCloseBrackets",r.insert_pair_brackets),t.editor.setOption("matchBrackets",r.brace_matching),t.editor.refresh()}},onPreferencesChange:function(e,t){window.parent.$(parent.document).on("prefchange:"+e,function(e){null===window.top?window.$(document).off(e):t(e)})}}),t.pgBrowser=h}).call(t,r(1))},162:function(e,t){e.exports=n},163:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=r(1),i=n(a),o=r(3),s=n(o),l=r(0),u=n(l),d=r(56),c=n(d),g=r(17),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(g),p=r(77),b=n(p),_=s.default.Browser=s.default.Browser||{};_.keyboardNavigation=_.keyboardNavigation||{},i.default.extend(_.keyboardNavigation,{init:function(){c.default.reset(),_.preferences_cache.length>0&&(this.keyboardShortcut={file_shortcut:f.parseShortcutValue(_.get_preference("browser","main_menu_file").value),object_shortcut:f.parseShortcutValue(_.get_preference("browser","main_menu_object").value),tools_shortcut:f.parseShortcutValue(_.get_preference("browser","main_menu_tools").value),help_shortcut:f.parseShortcutValue(_.get_preference("browser","main_menu_help").value),left_tree_shortcut:f.parseShortcutValue(_.get_preference("browser","browser_tree").value),tabbed_panel_backward:f.parseShortcutValue(_.get_preference("browser","tabbed_panel_backward").value),tabbed_panel_forward:f.parseShortcutValue(_.get_preference("browser","tabbed_panel_forward").value),sub_menu_query_tool:f.parseShortcutValue(_.get_preference("browser","sub_menu_query_tool").value),sub_menu_view_data:f.parseShortcutValue(_.get_preference("browser","sub_menu_view_data").value),sub_menu_properties:f.parseShortcutValue(_.get_preference("browser","sub_menu_properties").value),sub_menu_create:f.parseShortcutValue(_.get_preference("browser","sub_menu_create").value),sub_menu_delete:f.parseShortcutValue(_.get_preference("browser","sub_menu_delete").value),sub_menu_refresh:f.parseShortcutValue(_.get_preference("browser","sub_menu_refresh").value),context_menu:f.parseShortcutValue(_.get_preference("browser","context_menu").value),direct_debugging:f.parseShortcutValue(_.get_preference("browser","direct_debugging").value)},this.shortcutMethods={bindMainMenu:{shortcuts:[this.keyboardShortcut.file_shortcut,this.keyboardShortcut.object_shortcut,this.keyboardShortcut.tools_shortcut,this.keyboardShortcut.help_shortcut]},bindRightPanel:{shortcuts:[this.keyboardShortcut.tabbed_panel_backward,this.keyboardShortcut.tabbed_panel_forward]},bindMainMenuLeft:{shortcuts:"left",bindElem:".pg-navbar"},bindMainMenuRight:{shortcuts:"right",bindElem:".pg-navbar"},bindMainMenuUpDown:{shortcuts:["up","down"]},bindLeftTree:{shortcuts:this.keyboardShortcut.left_tree_shortcut},bindSubMenuQueryTool:{shortcuts:this.keyboardShortcut.sub_menu_query_tool},bindSubMenuViewData:{shortcuts:this.keyboardShortcut.sub_menu_view_data},bindSubMenuProperties:{shortcuts:this.keyboardShortcut.sub_menu_properties},bindSubMenuCreate:{shortcuts:this.keyboardShortcut.sub_menu_create},bindSubMenuDelete:{shortcuts:this.keyboardShortcut.sub_menu_delete},bindSubMenuRefresh:{shortcuts:this.keyboardShortcut.sub_menu_refresh,bindElem:"#tree"},bindContextMenu:{shortcuts:this.keyboardShortcut.context_menu},bindDirectDebugging:{shortcuts:this.keyboardShortcut.direct_debugging}},this.bindShortcuts())},bindShortcuts:function(){var e=this;i.default.each(e.shortcutMethods,function(t,r){e._bindWithMousetrap(t.shortcuts,e[r],t.bindElem)})},_bindWithMousetrap:function(e,t,r){var n=this;if(r){var a=document.querySelector(r);(0,c.default)(a).bind(e,function(){t.apply(this,arguments)}.bind(a))}else c.default.bind(e,function(){t.apply(n,arguments)})},bindMainMenu:function(e,t){var r=this.keyboardShortcut;t===r.file_shortcut&&(0,u.default)("#mnu_file a.dropdown-toggle").dropdown("toggle"),t===r.object_shortcut&&(0,u.default)("#mnu_obj a.dropdown-toggle").first().dropdown("toggle"),t===r.tools_shortcut&&(0,u.default)("#mnu_tools a.dropdown-toggle").dropdown("toggle"),t===r.help_shortcut&&(0,u.default)("#mnu_help a.dropdown-toggle").dropdown("toggle")},bindRightPanel:function(e,t){var r=s.default.Browser.docker.findPanels(),n=0,a=r.length,o=0,l=!1,u=this.keyboardShortcut;i.default.each(s.default.Browser.docker.findPanels(),function(e,t){e.isVisible()&&!l&&"browser"!==e._type&&(o=t,l=!0)}),t===u.tabbed_panel_backward?n=o>0?o-1:1:t===u.tabbed_panel_forward&&(n=o<a?o+1:a),s.default.Browser.docker.findPanels()[n].focus(),setTimeout(function(){document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()},1e3)},bindMainMenuLeft:function(e){var t=void 0;if((0,u.default)(e.target).hasClass("menu-link"))t=(0,u.default)(e.target).parent().parent().parent().prev(".dropdown");else{if((0,u.default)(e.target).parent().hasClass("dropdown-submenu"))return void(0,u.default)(e.target).parent().toggleClass("open");t=(0,u.default)(e.target).parent().prev(".dropdown")}t.hasClass("hide")&&(t=t.prev(".dropdown")),t.find("a:first").dropdown("toggle")},bindMainMenuRight:function(e){var t=void 0;if((0,u.default)(e.target).hasClass("menu-link"))t=(0,u.default)(e.target).parent().parent().parent().next(".dropdown");else{if((0,u.default)(e.target).parent().hasClass("dropdown-submenu"))return void(0,u.default)(e.target).parent().toggleClass("open");t=(0,u.default)(e.target).parent().next(".dropdown")}t.hasClass("hide")&&(t=t.next(".dropdown")),t.find("a:first").dropdown("toggle")},bindMainMenuUpDown:function(e,t){"up"===t&&(0,u.default)(e.target).parent().prev().prev(".dropdown-submenu").length>0?(0,u.default)(e.target).parent().prev().prev(".dropdown-submenu").find("a:first").trigger("focus"):(0,u.default)(e.target).parent().hasClass("dropdown-submenu")&&((0,u.default)(e.target).parent().parent().parent().find("a:first").dropdown("toggle"),(0,u.default)(e.target).parent().parent().children().eq(2).find("a:first").trigger("focus"))},bindLeftTree:function(){var e=this.getTreeDetails();(0,u.default)("#tree").trigger("focus"),e.t.focus(e.i),e.t.select(e.i)},bindSubMenuQueryTool:function(){var e=this.getTreeDetails();e.d&&s.default.DataGrid.show_query_tool("",e.i)},bindSubMenuViewData:function(){var e=this.getTreeDetails();e.d&&s.default.DataGrid.show_data_grid({mnuid:1},e.i)},bindSubMenuProperties:function(){var e=this.getTreeDetails();e.d&&!0!==s.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&s.default.Browser.Node.callbacks.show_obj_properties.call(s.default.Browser.Nodes[e.t.itemData(e.i)._type],{action:"edit"})},bindSubMenuCreate:function(){var e=this.getTreeDetails();e.d&&!0!==s.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&s.default.Browser.Node.callbacks.show_obj_properties.call(s.default.Browser.Nodes[e.t.itemData(e.i)._type],{action:"create"})},bindSubMenuDelete:function(){var e=this.getTreeDetails();e.d&&!0!==s.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&s.default.Browser.Node.callbacks.delete_obj.call(s.default.Browser.Nodes[e.t.itemData(e.i)._type])},bindSubMenuRefresh:function(e){e.preventDefault();var t=_.keyboardNavigation.getTreeDetails();s.default.Browser.Node.callbacks.refresh.call(s.default.Browser.Nodes[t.t.itemData(t.i)._type])},bindContextMenu:function(e){var t=this.getTreeDetails(),r=(0,u.default)(e.srcElement).find(".aciTreeEntry").position().left+70,n=(0,u.default)(e.srcElement).find(".aciTreeEntry").position().top+70;t.t.blur(t.i),(0,u.default)("#tree").trigger("blur"),t.i.children().contextMenu({x:r,y:n})},bindDirectDebugging:function(){var e=this.getTreeDetails(),t=e.t.itemData(e.i)._type;!e.d||"function"!==t&&"procedure"!==t||s.default.Tools.Debugger.can_debug(e.d,e.i,{debug_type:"direct"})&&s.default.Tools.Debugger.get_function_information(s.default.Browser.Nodes[t])},getTreeDetails:function(){var e=s.default.Browser.tree,t=e.selected().length>0?e.selected():e.first();return{t:e,i:t,d:t&&1===t.length?e.itemData(t):void 0}},getDialogTabNavigator:function(e){var t=_.get_preference("browser","dialog_tab_backward").value,r=_.get_preference("browser","dialog_tab_forward").value;return new b.default.dialogTabNavigator(e,t,r)}}),e.exports=s.default.Browser.keyboardNavigation},166:function(e,t,r){"use strict";var n,a;n=[r(2),r(4),r(0),r(1),r(11),r(3),r(5),r(10),r(12),r(6),r(29),r(103),r(58),r(104),r(24)],void 0!==(a=function(e,t,r,n,a,i,o,s,l,u,d,c,g,f){var p=d.default,b=window.wcDocker;null!=i.Browser.tree&&(i=i||window.pgAdmin||{});var _=i.Tools=i.Tools||{};if(_.DirectDebug)return _.DirectDebug;var h=new function(){};n.extend(h,s.Events,{enable:function(e,t){this.trigger("pgDebugger:button:state:"+e,t)},set_breakpoint:function(n,i,o){var s=t("debugger.set_breakpoint",{trans_id:n,line_no:i,set_type:o});r.ajax({url:s,method:"GET"}).done(function(e){e.data.status}).fail(function(){a.alert(e("Debugger Error"),e("Error while setting debugging breakpoint."))})},UpdateBreakpoint:function(e){var t=this,r=t.GetBreakpointInformation(e);if(1!=r.length||-1!=r[0].linenumber){for(var n=new Array,a=0;a<r.length;a++)-1!=r[a].linenumber&&n.push(r[a].linenumber);for(a=0;a<n.length;a++){void 0!=_.DirectDebug.editor.lineInfo(n[a]-1).gutterMarkers?_.DirectDebug.editor.setGutterMarker(n[a]-1,"breakpoints",null):_.DirectDebug.editor.setGutterMarker(n[a]-1,"breakpoints",function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}())}}},GetBreakpointInformation:function(n){var i="",o=t("debugger.execute_query",{trans_id:n,query_type:"get_breakpoints"});return r.ajax({url:o,method:"GET",async:!1}).done(function(t){"Success"===t.data.status?i=t.data.result:"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))}).fail(function(){a.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))}),i},setActiveLine:function(e){var t=_.DirectDebug.editor;e&&self.active_line_no&&t.removeLineClass(self.active_line_no,"wrap","CodeMirror-activeline-background"),!e&&self.active_line_no&&(e=self.active_line_no),e>0&&(self.active_line_no=e,t.addLineClass(self.active_line_no,"wrap","CodeMirror-activeline-background"),t.centerOnLine(self.active_line_no))},start_execution:function(n,i){var o=this,s=t("debugger.start_execution",{trans_id:n,port_num:i});r.ajax({url:s,method:"GET"}).done(function(t){"Success"===t.data.status?o.execute_query(n):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while starting debugging session."))}).fail(function(){a.alert(e("Debugger Error"),e("Error while starting debugging session."))})},execute_query:function(n){var i=this,o=t("debugger.execute_query",{trans_id:n,query_type:"wait_for_breakpoint"});r.ajax({url:o,method:"GET"}).done(function(t){"Success"===t.data.status?(null!=t.data.result[0].src&&null!=t.data.result[0].linenumber&&(_.DirectDebug.editor.setValue(t.data.result[0].src),i.setActiveLine(t.data.result[0].linenumber-2)),i.GetStackInformation(n),_.DirectDebug.debug_type&&i.poll_end_execution_result(n)):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while executing requested debugging information."))}).fail(function(){a.alert(e("Debugger Error"),e("Error while executing requested debugging information."))})},GetLocalVariables:function(n){var i=this,o=t("debugger.execute_query",{trans_id:n,query_type:"get_variables"});r.ajax({url:o,method:"GET"}).done(function(t){"Success"===t.data.status?(i.AddLocalVariables(t.data.result),i.AddParameters(t.data.result),_.DirectDebug.debug_restarted&&(_.DirectDebug.debug_type&&i.poll_end_execution_result(n),_.DirectDebug.debug_restarted=!1)):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while fetching variable information."))}).fail(function(){a.alert(e("Debugger Error"),e("Error while fetching variable information."))})},GetStackInformation:function(n){var i=this,o=t("debugger.execute_query",{trans_id:n,query_type:"get_stack_info"});r.ajax({url:o,method:"GET"}).done(function(t){"Success"===t.data.status?(i.AddStackInformation(t.data.result),i.GetLocalVariables(_.DirectDebug.trans_id)):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while fetching stack information."))}).fail(function(){a.alert(e("Debugger Error"),e("Error while fetching stack information."))})},poll_result:function(n){var i=this;if(_.DirectDebug.is_polling_required){var o,s=t("debugger.poll_result",{trans_id:n});o=_.DirectDebug.polling_timeout_idle?1e3:200,setTimeout(function(){r.ajax({url:s,method:"GET",beforeSend:function(){r(".debugger-container").addClass("show_progress")}}).done(function(t){r(".debugger-container").removeClass("show_progress"),"Success"===t.data.status?null==t.data.result||0==t.data.result.length?i.poll_result(n):(void 0!=t.data.result[0].src||null!=t.data.result[0].src?(_.DirectDebug.polling_timeout_idle=!1,_.DirectDebug.docker.finishLoading(50),t.data.result[0].src!=_.DirectDebug.editor.getValue()&&(_.DirectDebug.editor.setValue(t.data.result[0].src),i.UpdateBreakpoint(n)),i.setActiveLine(t.data.result[0].linenumber-2),i.GetStackInformation(n)):_.DirectDebug.debug_type||_.DirectDebug.first_time_indirect_debug?(_.DirectDebug.polling_timeout_idle=!1,_.DirectDebug.docker.finishLoading(50),t.data.result[0].src!=_.DirectDebug.editor.getValue()&&(_.DirectDebug.editor.setValue(t.data.result[0].src),i.UpdateBreakpoint(n)),i.setActiveLine(t.data.result[0].linenumber-2),i.GetStackInformation(n)):(_.DirectDebug.docker.finishLoading(50),i.setActiveLine(-1),i.clear_all_breakpoint(n),i.execute_query(n),_.DirectDebug.first_time_indirect_debug=!0,_.DirectDebug.polling_timeout_idle=!1),i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("continue",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0)):"Busy"===t.data.status?(_.DirectDebug.polling_timeout_idle=!0,_.DirectDebug.debug_type?i.poll_result(n):(_.DirectDebug.docker.startLoading(e("Waiting for another session to invoke the target...")),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("continue",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),_.DirectDebug.first_time_indirect_debug=!1,i.poll_result(n))):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while polling result."))}).fail(function(){a.alert(e("Debugger Error"),e("Error while polling result."))})},o)}},update_messages:function(e){e=n.escape(e);var t="",r="";t=_.DirectDebug.messages_panel.$container.find(".messages").html(),r=t?(t+"\n"+e).replace(/(?:\r\n|\r|\n)/g,"<br />").replace(/(<br\ ?\/?>)+/g,"<br />"):e,_.DirectDebug.messages_panel.$container.find(".messages").html(r)},poll_end_execution_result:function(n){var i=this;if(_.DirectDebug.is_polling_required){var o,s=t("debugger.poll_end_execution_result",{trans_id:n});o=_.DirectDebug.polling_timeout_idle?1200:250,setTimeout(function(){r.ajax({url:s,method:"GET"}).done(function(t){"Success"===t.data.status?void 0==t.data.result?(i.setActiveLine(-1),_.DirectDebug.direct_execution_completed=!0,_.DirectDebug.polling_timeout_idle=!0,a.success(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),r(".debugger-container").removeClass("show_progress"),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!0),_.DirectDebug.is_polling_required=!1):null!=t.data.result&&(i.setActiveLine(-1),i.AddResults(t.data.col_info,t.data.result),_.DirectDebug.results_panel.focus(),_.DirectDebug.direct_execution_completed=!0,_.DirectDebug.polling_timeout_idle=!0,a.success(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),r(".debugger-container").removeClass("show_progress"),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!0),_.DirectDebug.is_polling_required=!1):"Busy"===t.data.status?(i.poll_end_execution_result(n),t.data.status_message&&i.update_messages(t.data.status_message)):"NotConnected"===t.data.status?a.alert(e("Debugger poll end execution error"),t.data.result):"ERROR"===t.data.status&&(_.DirectDebug.direct_execution_completed=!0,i.setActiveLine(-1),_.DirectDebug.is_user_aborted_debugging||a.error(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),_.DirectDebug.messages_panel.focus(),r(".debugger-container").removeClass("show_progress"),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),_.DirectDebug.is_user_aborted_debugging||(i.enable("continue",!0),_.DirectDebug.is_user_aborted_debugging=!1),_.DirectDebug.is_polling_required=!1)}).fail(function(){a.alert(e("Debugger Error"),e("Error while polling result."))})},o)}},Restart:function(n){var i=this,o=t("debugger.restart",{trans_id:n});i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1),_.DirectDebug.messages_panel.$container.find(".messages").html(""),r.ajax({url:o}).done(function(o){var s=o.data.restart_debug?1:0;if(_.DirectDebug.polling_timeout_idle=!1,_.DirectDebug.is_polling_required=!0,i.poll_result(n),s&&(_.DirectDebug.debug_restarted=!0),o.data.result.require_input)c(o.data.result,s);else{var l=t("debugger.start_listener",{trans_id:n});r.ajax({url:l,method:"GET"}).done(function(){_.DirectDebug.debug_type&&i.poll_end_execution_result(n)}).fail(function(){a.alert(e("Debugger Error"),e("Error while polling result."))})}}).fail(function(t){try{var r=JSON.parse(t.responseText);0==r.success&&a.alert(e("Debugger Error"),r.errormsg)}catch(e){}})},Continue:function(n){var i=this;if(i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1),_.DirectDebug.direct_execution_completed&&_.DirectDebug.direct_execution_completed==_.DirectDebug.polling_timeout_idle)i.Restart(n);else{var o=t("debugger.execute_query",{trans_id:n,query_type:"continue"});r.ajax({url:o,method:"GET"}).done(function(t){t.data.status?i.poll_result(n):a.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))}).fail(function(){a.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))})}},Step_over:function(n){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=t("debugger.execute_query",{trans_id:n,query_type:"step_over"});r.ajax({url:o,method:"GET"}).done(function(t){t.data.status?i.poll_result(n):a.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))}).fail(function(){a.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))})},Step_into:function(n){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=t("debugger.execute_query",{trans_id:n,query_type:"step_into"});r.ajax({url:o,method:"GET"}).done(function(t){t.data.status?i.poll_result(n):a.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))}).fail(function(){a.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))})},Stop:function(n){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=t("debugger.execute_query",{trans_id:n,query_type:"abort_target"});r.ajax({url:o,method:"GET"}).done(function(t){t.data.status?(i.setActiveLine(-1),_.DirectDebug.direct_execution_completed=!0,_.DirectDebug.is_user_aborted_debugging=!0,_.DirectDebug.is_polling_required=!1,i.enable("continue",!1),a.success(t.info,3)):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))}).fail(function(){a.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))})},toggle_breakpoint:function(n){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=_.DirectDebug.editor.lineInfo(i.active_line_no),s="";s=void 0==o.gutterMarkers?t("debugger.set_breakpoint",{trans_id:n,line_no:i.active_line_no+1,set_type:"1"}):t("debugger.set_breakpoint",{trans_id:n,line_no:i.active_line_no+1,set_type:"0"}),r.ajax({url:s,method:"GET"}).done(function(t){if(t.data.status){void 0!=_.DirectDebug.editor.lineInfo(i.active_line_no).gutterMarkers?_.DirectDebug.editor.setGutterMarker(i.active_line_no,"breakpoints",null):_.DirectDebug.editor.setGutterMarker(i.active_line_no,"breakpoints",function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}()),i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0),i.enable("continue",!0)}else"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while toggling breakpoint."))}).fail(function(){a.alert(e("Debugger Error"),e("Error while toggling breakpoint."))})},clear_all_breakpoint:function(n){var i=this,o=i.GetBreakpointInformation(n);if(1!=o.length||-1!=o[0].linenumber){i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);for(var s=new Array,l=0;l<o.length;l++)-1!=o[l].linenumber&&s.push(o[l].linenumber);var u=t("debugger.clear_all_breakpoint",{trans_id:n});r.ajax({url:u,method:"POST",data:{breakpoint_list:s.join()}}).done(function(e){if(e.data.status)for(var t=0;t<s.length;t++){var r=_.DirectDebug.editor.lineInfo(s[t]-1);r&&void 0!=r.gutterMarkers&&_.DirectDebug.editor.setGutterMarker(s[t]-1,"breakpoints",null)}i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0),i.enable("continue",!0)}).fail(function(){a.alert(e("Debugger Error"),e("Error while clearing all breakpoint."))})}},AddStackInformation:function(t){var r=this;r.stack_grid&&(r.stack_grid.remove(),r.stack_grid=null);for(var n=s.Model.extend({defaults:{frame_id:0,name:void 0,value:void 0,line_no:void 0}}),a=s.Collection.extend({model:n}),i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",editable:!1,cell:"string"},{name:"line_no",label:e("Line No."),type:"text",editable:!1,cell:"string"}],o=[],u=0;u<t.length;u++)o.push({frame_id:u,name:t[u].targetname,value:t[u].args,line_no:t[u].linenumber});var d=this.stackColl=new a(o);this.stackColl.on("backgrid:row:selected",r.select_frame,r);var c=this.stack_grid=new l.Grid({columns:i,row:l.Row.extend({events:{click:"rowClick"},rowClick:function(){r.frame_id=this.model.get("frame_id"),this.model.trigger("backgrid:row:selected",this),r.stack_grid.$el.find("td").css("background-color",this.disabledColor),this.$el.find("td").css("background-color",this.highlightColor)}}),collection:d,className:"backgrid table-bordered"});c.render(),_.DirectDebug.stack_pane_panel.$container.find(".stack_pane").append(c.el)},AddResults:function(e,t){var r=this;r.result_grid&&(r.result_grid.remove(),r.result_grid=null);var a=s.Model.extend({defaults:{name:void 0}}),i=s.Collection.extend({model:a}),o=[];n.size(e)&&n.each(e,function(e){var t={type:"text",editable:!1,cell:"string"};t.name=t.label=e.name,o.push(t)});var u=this.result_grid=new l.Grid({columns:o,collection:new i(t),className:"backgrid table-bordered"});u.render(),_.DirectDebug.results_panel.$container.find(".debug_results").append(u.el)},AddLocalVariables:function(t){var r=this;r.variable_grid&&(r.variable_grid.remove(),r.variable_grid=null);var n=s.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),a=s.Collection.extend({model:n});a.prototype.on("change",r.deposit_parameter_value,r);var i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],o=[];if(0!=t.length)for(var u=0;u<t.length;u++)"L"==t[u].varclass&&o.push({name:t[u].name,type:t[u].dtype,value:t[u].value});var d=this.variable_grid=new l.Grid({columns:i,collection:new a(o),className:"backgrid table-bordered"});d.collection.on("backgrid:edited",function(e,t,r){f.setFocusToDebuggerEditor(_.DirectDebug.editor,r)}),d.render(),_.DirectDebug.local_variables_panel.$container.find(".local_variables").append(d.el)},AddParameters:function(t){var r=this;r.param_grid&&(r.param_grid.remove(),r.param_grid=null);var n=s.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),a=r.ParametersCollection=s.Collection.extend({model:n});a.prototype.on("change",r.deposit_parameter_value,r);var i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],o=[];if(0!=t.length)for(var u=0;u<t.length;u++)"A"==t[u].varclass&&o.push({name:t[u].name,type:t[u].dtype,value:t[u].value});var d=this.param_grid=new l.Grid({columns:i,collection:new a(o),className:"backgrid table-bordered"});d.collection.on("backgrid:edited",function(e,t,r){f.setFocusToDebuggerEditor(_.DirectDebug.editor,r)}),d.render(),_.DirectDebug.parameters_panel.$container.find(".parameters").append(d.el)},deposit_parameter_value:function(n){var i=this,o=[];o.push({name:n.get("name"),type:n.get("type"),value:n.get("value")});var s=t("debugger.deposit_value",{trans_id:_.DirectDebug.trans_id});r.ajax({url:s,method:"POST",data:{data:JSON.stringify(o)}}).done(function(e){e.data.status&&(i.GetLocalVariables(_.DirectDebug.trans_id),e.data.result?a.success(e.data.info,3):a.error(e.data.info,3))}).fail(function(){a.alert(e("Debugger Error"),e("Error while depositing variable value."))})},select_frame:function(){var n=this,i=t("debugger.select_frame",{trans_id:_.DirectDebug.trans_id,frame_id:n.frame_id});r.ajax({url:i,method:"GET"}).done(function(e){e.data.status&&(_.DirectDebug.editor.setValue(e.data.result[0].src),n.UpdateBreakpoint(_.DirectDebug.trans_id),n.setActiveLine(e.data.result[0].linenumber-2),n.GetLocalVariables(_.DirectDebug.trans_id))}).fail(function(){a.alert(e("Debugger Error"),e("Error while selecting frame."))})}});var v=s.View.extend({el:".debugger_main_container",initialize:function(){h.on("pgDebugger:button:state:stop",this.enable_stop,this),h.on("pgDebugger:button:state:step_over",this.enable_step_over,this),h.on("pgDebugger:button:state:step_into",this.enable_step_into,this),h.on("pgDebugger:button:state:continue",this.enable_continue,this),h.on("pgDebugger:button:state:toggle_breakpoint",this.enable_toggle_breakpoint,this),h.on("pgDebugger:button:state:clear_all_breakpoints",this.enable_clear_all_breakpoints,this)},events:{"click .btn-stop":"on_stop","click .btn-clear-breakpoint":"on_clear_all_breakpoint","click .btn-toggle-breakpoint":"on_toggle_breakpoint","click .btn-continue":"on_continue","click .btn-step-over":"on_step_over","click .btn-step-into":"on_step_into",keydown:"keyAction"},enable_stop:function(e){var t=this.$el.find(".btn-stop");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_over:function(e){var t=this.$el.find(".btn-step-over");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_into:function(e){var t=this.$el.find(".btn-step-into");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_continue:function(e){var t=this.$el.find(".btn-continue");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_toggle_breakpoint:function(e){var t=this.$el.find(".btn-toggle-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_clear_all_breakpoints:function(e){var t=this.$el.find(".btn-clear-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},on_stop:function(){h.Stop(_.DirectDebug.trans_id)},on_clear_all_breakpoint:function(){h.clear_all_breakpoint(_.DirectDebug.trans_id)},on_toggle_breakpoint:function(){h.toggle_breakpoint(_.DirectDebug.trans_id)},on_continue:function(){h.Continue(_.DirectDebug.trans_id)},on_step_over:function(){h.Step_over(_.DirectDebug.trans_id)},on_step_into:function(){h.Step_into(_.DirectDebug.trans_id)},keyAction:function(e){var t,r,a=this.$el,i=this;t=g.processEventDebugger(a,e,i.preferences),n.isUndefined(t)||n.isNull(t)||(r=t+1,_.DirectDebug.docker.findPanels()[r].focus())}}),m=function(){};return n.extend(m.prototype,{init:function(i,o){var s=this;if(n.bindAll(_.DirectDebug,"messages"),!this.initialized){var l;this.initialized=!0,this.trans_id=i,this.debug_type=o,this.first_time_indirect_debug=!1,this.direct_execution_completed=!1,this.polling_timeout_idle=!1,this.debug_restarted=!1,this.is_user_aborted_debugging=!1,this.is_polling_required=!0;var u=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;this.preferences=u.get_preferences_for_module("sqleditor"),this.docker=new b("#container",{allowContextMenu:!1,allowCollapse:!1,themePath:t("static",{filename:"css"}),theme:"webcabin.overrides.css"}),this.panels=[],void 0==i||o?void 0!=i&&o?(l=t("debugger.start_listener",{trans_id:i}),r.ajax({url:l,method:"GET"}).done(function(e){e.data.status&&s.messages(i)}).fail(function(){a.alert(e("Debugger Error"),e("Error while starting debugging listener."))})):this.intializePanels():(l=t("debugger.start_listener",{trans_id:i}),r.ajax({url:l,method:"GET"}).done(function(e){e.data.status&&(s.intializePanels(),h.poll_result(i))}).fail(function(){a.alert(e("Debugger Error"),e("Error while starting debugging listener."))}))}},messages:function(n){var i=this,o=t("debugger.messages",{trans_id:n});r.ajax({url:o,method:"GET"}).done(function(t){"Success"===t.data.status?(i.intializePanels(),h.start_execution(n,t.data.result)):"Busy"===t.data.status?i.messages(n):"NotConnected"===t.data.status&&a.alert(e("Not connected to server or connection with the server has been closed."),t.data.result)}).fail(function(){a.alert(e("Debugger Error"),e("Error while fetching messages information."))})},onBreakPoint:function(e,t,r){var n=this;if("breakpoints"==r&&!_.DirectDebug.polling_timeout_idle){var a=e.lineInfo(t);void 0==a.gutterMarkers?h.set_breakpoint(n.trans_id,t+1,1):void 0==a.gutterMarkers.breakpoints?h.set_breakpoint(n.trans_id,t+1,1):h.set_breakpoint(n.trans_id,t+1,0);var i=a.gutterMarkers;void 0!=i&&void 0==a.gutterMarkers.breakpoints&&(i=a.gutterMarkers.breakpoints),e.setGutterMarker(t,"breakpoints",i?null:function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}())}},intializePanels:function(){var t=this;this.registerPanel("code",!1,"100%","50%",function(){var r=new i.Browser.Panel({name:"parameters",title:e("Parameters"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="parameters" class="parameters" tabindex="0"></div>'}),n=new i.Browser.Panel({name:"local_variables",title:e("Local variables"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="local_variables" class="local_variables" tabindex="0"></div>'}),a=new i.Browser.Panel({name:"messages",title:e("Messages"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="messages" class="messages" tabindex="0"></div>'}),o=new i.Browser.Panel({name:"results",title:e("Results"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="debug_results" class="debug_results" tabindex="0"></div>'}),s=new i.Browser.Panel({name:"stack_pane",title:e("Stack"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="stack_pane" class="stack_pane" tabindex="0"></div>'});r.load(t.docker),n.load(t.docker),a.load(t.docker),o.load(t.docker),s.load(t.docker)}),t.code_editor_panel=t.docker.addPanel("code",b.DOCK.TOP),t.parameters_panel=t.docker.addPanel("parameters",b.DOCK.BOTTOM,t.code_editor_panel),t.local_variables_panel=t.docker.addPanel("local_variables",b.DOCK.STACKED,t.parameters_panel,{tabOrientation:b.TAB.TOP}),t.messages_panel=t.docker.addPanel("messages",b.DOCK.STACKED,t.parameters_panel),t.results_panel=t.docker.addPanel("results",b.DOCK.STACKED,t.parameters_panel),t.stack_pane_panel=t.docker.addPanel("stack_pane",b.DOCK.STACKED,t.parameters_panel);var n=r('<div id="stack_editor_pane" class="pg-panel-content info"></div>'),a=r('<textarea id="debugger-editor-textarea"></textarea>').appendTo(n);t.code_editor_panel.layout().addItem(n),t.editor=p.fromTextArea(a.get(0),{tabindex:-1,lineNumbers:!0,foldOptions:{widget:"…"},foldGutter:{rangeFinder:p.fold.combine(p.pgadminBeginRangeFinder,p.pgadminIfRangeFinder,p.pgadminLoopRangeFinder,p.pgadminCaseRangeFinder)},gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","breakpoints"],mode:"text/x-pgsql",readOnly:!0,extraKeys:i.Browser.editor_shortcut_keys,indentWithTabs:i.Browser.editor_options.indent_with_tabs,indentUnit:i.Browser.editor_options.tabSize,tabSize:i.Browser.editor_options.tabSize,lineWrapping:i.Browser.editor_options.wrapCode,autoCloseBrackets:i.Browser.editor_options.insert_pair_brackets,matchBrackets:i.Browser.editor_options.brace_matching}),p.on(t.editor,"keydown",function(e,t){27==t.keyCode&&document.activeElement.blur()});var s=function(){t.docker.finishLoading(100),t.docker.off(b.EVENT.LOADED),t.editor.on("gutterClick",t.onBreakPoint.bind(t),t),t.docker.$container&&t.docker.$container.parent().focus();var e=setInterval(function(){try{if((window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser).preference_version()>0&&(clearInterval(e),t.reflectPreferences(),t.preferences.debugger_new_browser_tab))var r=setInterval(function(){window.opener&&window.opener.pgAdmin?t.reflectPreferences():clearInterval(r)},1e3)}catch(t){throw clearInterval(e),t}},0)};t.docker.startLoading(e("Loading...")),t.docker.on(b.EVENT.LOADED,s),this.toolbarView=new v,o.onPreferencesChange("debugger",function(){t.reflectPreferences()})},reflectPreferences:function(){var e=this,t=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;e.preferences=t.get_preferences_for_module("debugger"),e.toolbarView.preferences=e.preferences,e.toolbarView.$el.find("#btn-step-into").attr("title",g.shortcut_accesskey_title("Step into",e.preferences.btn_step_into)).attr("accesskey",g.shortcut_key(e.preferences.btn_step_into)),e.toolbarView.$el.find("#btn-step-over").attr("title",g.shortcut_accesskey_title("Step over",e.preferences.btn_step_over)).attr("accesskey",g.shortcut_key(e.preferences.btn_step_over)),e.toolbarView.$el.find("#btn-continue").attr("title",g.shortcut_accesskey_title("Continue/Start",e.preferences.btn_start)).attr("accesskey",g.shortcut_key(e.preferences.btn_start)),e.toolbarView.$el.find("#btn-toggle-breakpoint").attr("title",g.shortcut_accesskey_title("Toggle breakpoint",e.preferences.btn_toggle_breakpoint)).attr("accesskey",g.shortcut_key(e.preferences.btn_toggle_breakpoint)),e.toolbarView.$el.find("#btn-clear-breakpoint").attr("title",g.shortcut_accesskey_title("Clear all breakpoints",e.preferences.btn_clear_breakpoints)).attr("accesskey",g.shortcut_key(e.preferences.btn_clear_breakpoints)),e.toolbarView.$el.find("#btn-stop").attr("title",g.shortcut_accesskey_title("Stop",e.preferences.btn_stop)).attr("accesskey",g.shortcut_key(e.preferences.btn_stop))},registerPanel:function(e,t,n,a,i){var o=this;this.docker.registerPanelType(e,{title:t,isPrivate:!0,onCreate:function(s){o.panels[e]=s,s.initSize(n,a),t?s.title(t):s.title(!1),s.closeable(!1),s.layout().addItem(r('<div tabindex="0">',{class:"pg-debugger-panel"})),i&&i.apply(o,[s])}})}}),_.DirectDebug=new m,_.DirectDebug.jquery=r,_.DirectDebug}.apply(t,n))&&(e.exports=a)},17:function(e,t,r){"use strict";function n(e){var t="";return e.alt&&(t+="alt+"),e.shift&&(t+="shift+"),e.control&&(t+="ctrl+"),t+=e.key.char.toLowerCase()}function a(e){0!=e.length&&setTimeout(function(){var t=e.find("button.fa-plus:first");0==t.length&&(t=e.find(".pgadmin-controls:first>input:enabled,.CodeMirror-scroll")),t.length>0?t[0].focus():e[0].focus()},200)}Object.defineProperty(t,"__esModule",{value:!0}),t.isString=t.isFunction=t.isValidData=void 0,t.parseShortcutValue=n,t.findAndSetFocus=a;var i=r(1),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){return!o.default.isUndefined(e)&&!o.default.isNull(e)},l=function(e){return o.default.isFunction(e)},u=function(e){return o.default.isString(e)};t.isValidData=s,t.isFunction=l,t.isString=u},2:function(e,t,r){"use strict";var n,a;n=[r(47)],void 0!==(a=function(e){return function(t,r){var n,a=e[t]?e[t]:t,i=/([^%]*)%\(([^\)]+)\)s(.*)/,o=a;do{n=!1,o=o.replace(i,function(e,t,a,i){return n=!0,t+r[a]+i})}while(n);return o}}.apply(t,n))&&(e.exports=a)},26:function(e,t,r){"use strict";(function(e){function r(e,t){return a.call(e,t)}function n(e){var t=this.treeMenu.translateTreeNodeIdFromACITree(e),r=this.treeMenu.findNode(t);return a.call(this,r)}function a(t){var r=0,n=0,a={};do{var o=t.getData();if(o._type in this.Nodes&&this.Nodes[o._type].hasId){var s=i(o._type,n);void 0===a[s]&&(a[s]=e.extend({},o,{priority:r}),r-=1)}n+=1,t=t.hasParent()?t.parent():null}while(t);return a}function i(e,t){return"partition"===e&&t>0?"table":e}Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeNodeHierarchyFromElement=r,t.getTreeNodeHierarchyFromIdentifier=n,t.getTreeNodeHierarchy=a}).call(t,r(1))},29:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(14),a=function(e){return e&&e.__esModule?e:{default:e}}(n);r(53),r(91),r(92),r(73),r(93),r(94),r(95),r(96),r(54),r(97),r(74),r(98),r(99),r(100),r(101),r(37),r(49),t.default=a.default},3:function(e,t,r){"use strict";(function(r){var n,a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[],void 0!==(a=function(){var e=window.pgAdmin=window.pgAdmin||{};return function(e,t,r){function n(e,t,n,i){n=n||"width";var o,l,u,g=(t.match(d)||[])[2],f="px"===g?1:c[g+"toPx"],p=/r?em/i;if(f||p.test(g)&&!i)e=f?e:"rem"===g?s:"fontSize"===n?e.parentNode||e:e,f=f||parseFloat(a(e,"fontSize")),u=parseFloat(t)*f;else{o=e.style,l=o[n];try{o[n]=t}catch(e){return 0}u=o[n]?parseFloat(a(e,n)):0,o[n]=l!==r?l:null}return u}function a(e,t){var r,o,s,l,c,g=/^top|bottom/,f=["paddingTop","paddingBottom","borderTop","borderBottom"],p=4;if(r=u?u(e)[t]:(o=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)])?o+"px":"fontSize"===t?n(e,"1em","left",1)+"px":e.currentStyle[t],"%"===(s=(r.match(d)||[])[2])&&i)if(g.test(t)){for(l=(c=e.parentNode||e).offsetHeight;p--;)l-=parseFloat(a(c,f[p]));r=parseFloat(r)/100*l+"px"}else r=n(e,r);else("auto"===r||s&&"px"!==s)&&u?r=0:s&&"px"!==s&&!u&&(r=n(e,r)+"px");return r}var i,o=t.createElement("test"),s=t.documentElement,l=t.defaultView,u=l&&l.getComputedStyle,d=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,c={},g=[1/25.4,1/2.54,1/72,1/6],f=["mm","cm","pt","pc","in","mozmm"],p=6;for(s.appendChild(o),u&&(o.style.marginTop="1%",i="1%"===u(o).marginTop);p--;)c[f[p]+"toPx"]=g[p]?g[p]*c.inToPx:n(o,"1"+f[p]);s.removeChild(o),o=r,e.toPx=n}(e,window.document),e.natural_sort=function(e,t,r){r=r||{};var n,a,o=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,d=/^0/,c=function(e){return r.insensitive&&(""+e).toLowerCase()||""+e},g=c(e).replace(s,"")||"",f=c(t).replace(s,"")||"",p=g.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),b=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),_=parseInt(g.match(u))||1!==p.length&&g.match(l)&&Date.parse(g),h=parseInt(f.match(u))||_&&f.match(l)&&Date.parse(f)||null,v=r.desc?-1:1;if(h){if(_<h)return-1*v;if(_>h)return 1*v}for(var m=0,y=Math.max(p.length,b.length);m<y;m++){if(n=!(p[m]||"").match(d)&&parseFloat(p[m])||p[m]||0,a=!(b[m]||"").match(d)&&parseFloat(b[m])||b[m]||0,isNaN(n)!==isNaN(a))return(isNaN(n)?1:-1)*v;if((void 0===n?"undefined":i(n))!==(void 0===a?"undefined":i(a))&&(n+="",a+=""),n<a)return-1*v;if(n>a)return 1*v}return 0},e}.apply(t,n))&&(e.exports=a)}).call(t,r(3))},30:function(e,t,r){"use strict";var n,a;n=[r(0),r(2),r(4)],void 0!==(a=function(e,t,r){var n={epicRandomString:function(e){for(var t=[],r="0123456789abcdef",n=0;n<36;n++)t[n]=r.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=r.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("").replace(/-/g,"").substr(0,e)},getHash:function(e){for(var t=0,r=e.length,n=0;n<r;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t},calculateColumnWidth:function(t){e("body").append('<span id="pg_text" style="visibility: hidden;">'+t+"</span>");var r=e("#pg_text").width()+23;return e("#pg_text").remove(),r},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},previousStatus:null,fetchConnectionStatus:function(a,i,o){var s=r("sqleditor.connection_status",{trans_id:a.transId});if("visible"===document.visibilityState&&"visible"===i.data("panel-visible")){var l=a;e.ajax({url:s,method:"GET"}).done(function(e){if(e&&e.data){var r=e.data.status,a=e.data.message,s=!1;switch(l.update_notifications(e.data.notifies),r){case 1:r!=n.previousStatus||o.hasClass("fa-hourglass-half")||(o.removeClass().addClass("fa fa-hourglass-half"),s=!0);break;case 2:n.previousStatus==r||o.hasClass("fa-clock-o")||(o.removeClass().addClass("fa fa-clock-o"),s=!0);break;case 3:n.previousStatus==r||o.hasClass("fa-exclamation-circle")||(o.removeClass().addClass("fa fa-exclamation-circle"),s=!0);break;case 4:n.previousStatus==r||o.hasClass("fa-exclamation-triangle")||(o.removeClass().addClass("fa fa-exclamation-triangle"),s=!0);break;default:n.previousStatus==r||o.hasClass("fa-query_tool_connected")||(o.removeClass().addClass("fa-custom fa-query-tool-connected"),s=!0)}n.previousStatus=r,s&&(i.popover("hide"),i.attr("data-content",a))}else n.previousStatus=-99,a=t("An unexpected error occurred - ensure you are logged into the application."),i.attr("data-content",a),o.hasClass("fa-query-tool-disconnected")||(i.popover("hide"),o.removeClass().addClass("fa-custom fa-query-tool-disconnected"))}).fail(function(e){n.previousStatus=-1;var r=t("Transaction status check failed.");0==e.readyState?r=t("Not connected to the server or the connection to the server has been closed."):e.responseJSON&&e.responseJSON.errormsg&&(r=e.responseJSON.errormsg),i.attr("data-content",r),o.hasClass("fa-query-tool-disconnected")||(i.popover("hide"),o.removeClass().addClass("fa-custom fa-query-tool-disconnected"))})}},updateConnectionStatusFlag:function(t){var r=e(".connection_status");r.data("panel-visible")!=t&&r.data("panel-visible",t)},calcFontSize:function(e){if(e){var t=Number(Math.round(e+"e+2")+"e-2");if(t>0)return t+"em"}return"1em"}};return n}.apply(t,n))&&(e.exports=a)},37:function(e,t,r){"use strict";(function(e){var n,a,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){"object"==o(t)&&"object"==o(e)?s(r(14)):(a=[r(14)],n=s,void 0!==(i="function"==typeof n?n.apply(t,a):n)&&(e.exports=i))}(function(e){e.pgadminKeywordRangeFinder=function(t,r,n,a){for(var i,o,s=r.line,l=t.getLine(s),u=l.length;u>0;){var d=l.lastIndexOf(n,u),c=n,g=a;if(d<r.ch){if((d=l.lastIndexOf("[",u))<r.ch)break;c="[",g="]"}if(o=t.getTokenAt(e.Pos(s,d+1)).type,!/^(comment|string)/.test(o)){i=d;break}u=d-1}if(!(null==i||l.lastIndexOf(c)>i)){var f,p,b=1,_=t.lineCount();e:for(var h=s+1;h<_;++h)for(var v=t.getLine(h),m=0;;){var y=v.indexOf(c,m),w=v.indexOf(g,m);if(y<0&&(y=v.length),w<0&&(w=v.length),(m=Math.min(y,w))==v.length)break;if(t.getTokenAt(e.Pos(h,m+1)).type==o)if(m==y)++b;else if(!--b){f=h,p=m;break e}++m}if(null!=f&&f!=s+1)return{from:e.Pos(s,i+n.length),to:e.Pos(f,p)}}},e.pgadminBeginRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"BEGIN","END;")},e.pgadminIfRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"IF","END IF")},e.pgadminLoopRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"LOOP","END LOOP")},e.pgadminCaseRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"CASE","END CASE")}})}).call(t,r(28)(e))},4:function(e,t,r){"use strict";var n,a;n=[r(48)],void 0!==(a=function(e){return function(t,r){var n=e[t],a=/([<])([^:^>]*:)?([^>]+)([>])/g,i=n;return n?i=i.replace(a,function(e,t,n,a){return a in r?r[a]:e}):n}}.apply(t,n))&&(e.exports=a)},47:function(t,r){t.exports=e},48:function(e,r){e.exports=t},49:function(e,t,r){"use strict";var n=r(14);(function(e){return e&&e.__esModule?e:{default:e}})(n).default.defineExtension("centerOnLine",function(e){var t=this.getScrollInfo().clientHeight,r=this.charCoords({line:e,ch:0},"local");this.scrollTo(null,(r.top+r.bottom-t)/2)})},50:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){return d.default.isUndefined(window.opener)||d.default.isNull(window.opener)?window.parent.pgAdmin.Browser:window.opener.pgAdmin.Browser}function i(e,t){var r=e.get_preference("browser","enable_acitree_animation").value;d.default.isUndefined(t)&&(t=e.tree),r?t.options({animateRoot:!0,unanimated:!1,show:d.default.extend(t.options().show,{duration:75}),hide:d.default.extend(t.options().hide,{duration:75}),view:d.default.extend(t.options().view,{duration:75})}):t.options({animateRoot:!1,unanimated:!0,show:d.default.extend(t.options().show,{duration:0}),hide:d.default.extend(t.options().hide,{duration:0}),view:d.default.extend(t.options().view,{duration:0})})}function o(e){(d.default.isUndefined(e)||d.default.isNull(e))&&(e=a()),e.get_preference("browser","enable_alertify_animation").value?((0,l.default)(document).find("link#alertify-no-animation").attr("disabled","disabled"),d.default.each(document.getElementsByTagName("iframe"),function(e){(0,l.default)(e.contentDocument).find("link#alertify-no-animation").attr("disabled","disabled")})):((0,l.default)(document).find("link#alertify-no-animation").removeAttr("disabled","disabled"),d.default.each(document.getElementsByTagName("iframe"),function(e){(0,l.default)(e.contentDocument).find("link#alertify-no-animation").removeAttr("disabled","disabled")}))}var s=r(0),l=n(s),u=r(1),d=n(u);e.exports={modifyAcitreeAnimation:i,modifyAlertifyAnimation:o}},55:function(e,t){e.exports=r},58:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(){return-1!=window.navigator.platform.search("Mac")}function i(e){return e.ctrlKey||e.altKey}function o(e){return e.altKey||e.shiftKey}function s(e){return e.ctrlKey||e.shiftKey}function l(e){return e.ctrlKey||e.altKey||e.shiftKey}function u(e){return e.altKey&&e.shiftKey&&!e.ctrlKey}function d(e){return e.ctrlKey&&e.shiftKey&&!e.altKey}function c(e){return e.ctrlKey&&e.altKey&&!e.shiftKey}function g(e){var t="";return e.key&&e.key.char&&(t=e.key.char.toUpperCase()),t}function f(e,t){var r="";return void 0===t||null===t?r:(t.alt&&(r=(0,D.default)("Alt")+"+"),t.shift&&(r+=(0,D.default)("Shift")+"+"),t.control&&(r+=(0,D.default)("Ctrl")+"+"),r+=g(t),(0,D.default)("%(title)s (%(text_representation)s)",{title:e,text_representation:r}))}function p(e,t){return(0,D.default)("%(title)s (accesskey + %(key)s)",{title:e,key:g(t)})}function b(e){e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}function _(e,t){if(!e)return!1;var r=t.which||t.keyCode;return e.alt==t.altKey&&e.shift==t.shiftKey&&e.control==t.ctrlKey&&e.key.key_code==r}function h(e,t,r){var n=void 0,a=void 0,i=void 0;return this.validateShortcutKeys(r.edit_grid_values,t)?(this._stopEventPropagation(t),a=e.find('div.wcPanelTabContent:not(".wcPanelTabContentHidden")'),a.length&&(i=(0,w.default)(a).find("td.editable:first"),i.length&&i.trigger("click"))):this.validateShortcutKeys(r.move_next,t)?(this._stopEventPropagation(t),n=this.getInnerPanel(e,"right")):this.validateShortcutKeys(r.move_previous,t)&&(this._stopEventPropagation(t),n=this.getInnerPanel(e,"left")),n}function v(e,t){if(!e||!e.length)return!1;var r=e.find(".wcPanelTab");if(!r.length||1==r.length)return!1;var n=(0,w.default)(r).filter(".wcPanelTabActive"),a=parseInt((0,w.default)(n).attr("id")),i=r.length-1;return"left"==t?a>0&&a--:a<i&&a++,a}function m(e,t,r){if(!e.isQueryRunning()){var n=r.which||r.keyCode,a=void 0,i=e.preferences.execute_query,o=e.preferences.explain_query,s=e.preferences.explain_analyze_query,l=e.preferences.download_csv,u=e.preferences.move_next,d=e.preferences.move_previous,c=e.preferences.toggle_case;if(this.validateShortcutKeys(i,r))this._stopEventPropagation(r),t.executeQuery(e);else if(this.validateShortcutKeys(o,r))this._stopEventPropagation(r),t.explain(e);else if(this.validateShortcutKeys(s,r))this._stopEventPropagation(r),t.explainAnalyze(e);else if(this.validateShortcutKeys(l,r))this._stopEventPropagation(r),t.download(e);else if(this.validateShortcutKeys(c,r))this._stopEventPropagation(r),t.toggleCaseOfSelectedText(e);else if((this.isMac()&&r.metaKey||!this.isMac()&&r.ctrlKey)&&!r.altKey&&r.shiftKey&&n===S)this._stopEventPropagation(r),t.commentBlockCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(r)&&r.metaKey||!this.isMac()&&!this.isKeyAltShift(r)&&r.ctrlKey)&&n===S)this._stopEventPropagation(r),t.commentLineCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(r)&&r.metaKey||!this.isMac()&&!this.isKeyAltShift(r)&&r.ctrlKey)&&n===x)this._stopEventPropagation(r),t.uncommentLineCode(e);else if(n==C)t.focusOut(e);else if(this.validateShortcutKeys(u,r))this._stopEventPropagation(r),a=this.getInnerPanel(e.container,"right");else if(this.validateShortcutKeys(d,r))this._stopEventPropagation(r),a=this.getInnerPanel(e.container,"left");else if(n===T||n===P){if((0,w.default)(r.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(r);var g=(0,w.default)(r.target).closest("li");(0,w.default)(r.target).closest(".dropdown-menu").find(".open").removeClass("open");for(var f=!0;f;)n===T?g=g.prev():n===P&&(g=g.next()),g.hasClass("divider")||(f=!1);g.find("a:first").trigger("focus")}}else if((n===E||n===N)&&(0,w.default)(r.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(r);var p=(0,w.default)(r.target).closest("li");if(n===N)p.hasClass("dropdown-submenu")&&(p.addClass("open"),p=p.find(".dropdown-menu li:first-child"));else if(n===E){var b=p.closest(".dropdown-menu");b.closest(".dropdown-submenu").length>0&&(b.closest(".dropdown-submenu").removeClass("open"),p=b.closest(".dropdown-submenu"))}p.find("a:first").trigger("focus")}return a}}var y=r(0),w=n(y),k=r(2),D=n(k),x=190,S=191,C=27,E=37,T=38,N=39,P=40;e.exports={processEventDebugger:h,processEventQueryTool:m,getInnerPanel:v,validateShortcutKeys:_,_stopEventPropagation:b,isMac:a,isKeyCtrlAlt:i,isKeyAltShift:o,isKeyCtrlShift:s,isKeyCtrlAltShift:l,isAltShiftBoth:u,isCtrlShiftBoth:d,isCtrlAltBoth:c,shortcut_key:g,shortcut_title:f,shortcut_accesskey_title:p}},75:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){e.label in f||(p.addButton(e.label,e.btnClass,e.text,e.label,e.toggled,e.toggleClass,e.parentClass,e.enabled),f[e.label]=e)}function i(e,t){p=e,d.default.each(b,function(e){a(e)}),d.default.each(_,function(e){a(e)}),e.on(t.EVENT.BUTTON,function(e){"name"in e&&"Query Tool"===e.name?g.default.DataGrid.show_query_tool("",g.default.Browser.tree.selected()):"name"in e&&"View Data"===e.name?g.default.DataGrid.show_data_grid({mnuid:3},g.default.Browser.tree.selected()):"name"in e&&"Filtered Rows"===e.name&&g.default.DataGrid.show_filtered_row({mnuid:4},g.default.Browser.tree.selected())})}function o(e,t){e in f&&p.buttonEnable(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.initializeToolbar=i,t.enable=o;var s=r(2),l=n(s),u=r(1),d=n(u),c=r(3),g=n(c),f={},p=null,b=[{label:(0,l.default)("Filtered Rows"),btnClass:"fa fa-filter",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:!1},{label:(0,l.default)("View Data"),btnClass:"fa fa-table",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:!1},{label:(0,l.default)("Query Tool"),btnClass:"fa fa-bolt",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:!1}],_=[]},76:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return null===t?e:function e(r){for(var n=0,a=r.children.length;n<a;n++){var i=e(r.children[n]);if(null!==i)return i}return r.path===t?r:null}(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidTreeNodeData=t.Tree=t.TreeNode=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(17),s=t.TreeNode=function(){function e(t,r,a,i){n(this,e),this.id=t,this.data=r,this.setParent(i),this.children=[],this.domNode=a}return i(e,[{key:"hasParent",value:function(){return null!==this.parentNode&&void 0!==this.parentNode}},{key:"parent",value:function(){return this.parentNode}},{key:"setParent",value:function(e){this.parentNode=e,this.path=this.id,null!==e&&void 0!==e&&void 0!==e.path&&(this.path=e.path+"."+this.id)}},{key:"getData",value:function(){if(void 0!==this.data)return null===this.data?null:Object.assign({},this.data)}},{key:"getHtmlIdentifier",value:function(){return this.domNode}},{key:"reload",value:function(e){var t=this;this.unload(e),e.aciTreeApi.setInode(this.domNode),e.aciTreeApi.deselect(this.domNode),setTimeout(function(){e.selectNode(t.domNode)},0)}},{key:"unload",value:function(e){this.children=[],e.aciTreeApi.unload(this.domNode)}},{key:"ancestorNode",value:function(e){for(var t=this;t.hasParent();)if(t=t.parent(),e(t))return t;return null}},{key:"anyFamilyMember",value:function(e){return!!e(this)||null!==this.ancestorNode(e)}},{key:"anyParent",value:function(e){return null!==this.ancestorNode(e)}}]),e}(),l=(t.Tree=function(){function e(){n(this,e),this.rootNode=new s(void 0,{}),this.aciTreeApi=void 0}return i(e,[{key:"addNewNode",value:function(e,t,r,n){var a=this.findNode(n);return this.createOrUpdateNode(e,t,a,r)}},{key:"findNode",value:function(e){return null===e||void 0===e||0===e.length?this.rootNode:a(this.rootNode,e.join("."))}},{key:"findNodeByDomElement",value:function(e){var t=this.translateTreeNodeIdFromACITree(e);if(t&&t[0])return this.findNode(t)}},{key:"selected",value:function(){return this.aciTreeApi.selected()}},{key:"selectNode",value:function(e){this.aciTreeApi.select(e)}},{key:"createOrUpdateNode",value:function(e,t,r,n){var a=[e];null!==r&&void 0!==r&&(a=[r.path,e]);var i=this.findNode(a);if(null!==i)return i.data=Object.assign({},t),i;var o=new s(e,t,n,r);return r===this.rootNode&&(o.parentNode=null),r.children.push(o),o}},{key:"register",value:function(e){e.on("acitree",function(e,t,r,n){if(t.isItem(r)&&"added"===n){var a=t.getId(r),i=t.itemData(r),o=this.translateTreeNodeIdFromACITree(t.parent(r));this.addNewNode(a,i,r,o)}}.bind(this)),this.aciTreeApi=e.aciTree("api")}},{key:"translateTreeNodeIdFromACITree",value:function(e){for(var t=e,r=[];null!==t&&void 0!==t&&t.length>0&&(r.unshift(this.aciTreeApi.getId(t)),this.aciTreeApi.hasParent(t));)t=this.aciTreeApi.parent(t);return r}}]),e}(),o.isValidData);t.isValidTreeNodeData=l},77:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),s=n(o),l=r(56),u=n(l),d=r(17),c=function(){function e(t,r,n){a(this,e),this.dialog=t,this.tabSwitching=!1,this.tabs=this.dialog.$el.find(".nav-tabs"),this.tabs.length>0&&(this.tabs=this.tabs[0]),this.dialogTabBackward=(0,d.parseShortcutValue)(r),this.dialogTabForward=(0,d.parseShortcutValue)(n),(0,u.default)(this.dialog.el).bind(this.dialogTabBackward,this.onKeyboardEvent.bind(this)),(0,u.default)(this.dialog.el).bind(this.dialogTabForward,this.onKeyboardEvent.bind(this))}return i(e,[{key:"onKeyboardEvent",value:function(e,t){var r=this.dialog.$el.find(".tab-content:first > .tab-pane.active:first"),n=this.isActivePaneHasChildTabs(r);if(!this.tabSwitching)if(this.tabSwitching=!0,n){var a=this.navigate(t,n.childTab,n.childTabPane);a||this.navigate(t,this.tabs,r)}else this.navigate(t,this.tabs,r)}},{key:"isActivePaneHasChildTabs",value:function(e){var t,r=e.find(".nav-tabs:first");return r.length>0?(t=e.find(".tab-content:first > .tab-pane.active:first"),{childTab:r,childTabPane:t}):null}},{key:"navigate",value:function(e,t,r){return e==this.dialogTabBackward?this.navigateBackward(t,r):e==this.dialogTabForward&&this.navigateForward(t,r)}},{key:"navigateBackward",value:function(e,t){var r,n,a=this,i=(0,s.default)(e).find("li.active").prev("li");return i.length>0?(i.find("a").tab("show"),r=t.prev(),n=r.find(".tab-content:first > .tab-pane.active:first"),n.length>0?(0,d.findAndSetFocus)(n):(0,d.findAndSetFocus)(r),setTimeout(function(){a.tabSwitching=!1},200),!0):(this.tabSwitching=!1,!1)}},{key:"navigateForward",value:function(e,t){var r,n,a=this,i=(0,s.default)(e).find("li.active").next("li");return i.length>0?(i.find("a").tab("show"),r=t.next(),n=r.find(".tab-content:first > .tab-pane.active:first"),n.length>0?(0,d.findAndSetFocus)(n):(0,d.findAndSetFocus)(r),setTimeout(function(){a.tabSwitching=!1},200),!0):(this.tabSwitching=!1,!1)}},{key:"detach",value:function(){(0,u.default)(this.dialog.el).unbind(this.dialogTabBackward),(0,u.default)(this.dialog.el).unbind(this.dialogTabForward)}}]),e}();e.exports={dialogTabNavigator:c}}},[166]).default});